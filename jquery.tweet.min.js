/*!
 * jQuery tweet
 * Copyright 2012 Fredrik Forsmo, @frozzare
 * Version: 0.5
 * Licensed under the MIT license http://frozzare.mit-license.org
 */
;(function(e,d,h,j){function f(b,a){this.element=e(b);"string"===typeof a?a={screen_name:a}:a.username!==j&&(a.screen_name=a.username,delete a.username);!a.include_rts&&1===a.count&&(a.count=5,a.show=1);a.callback="tweets."+g+".twitterCallback";this.options=e.extend({},i,a);this._defaults=i;this._screen_name=a.screen_name;e.getScript(this.url())}var g="",i={screen_name:"",include_rts:!0,max_id:0,since_id:0,count:1,show:0,list:!1,avatar:!1,protocol:"http"===h.location.protocol.substr(0,4)?h.location.protocol:
"http:"};f.prototype={status:function(b){var a=b.text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(a){return'<a href="'+a+'">'+a+"</a>"}).replace(/\B@([_a-z0-9]+)/ig,function(a){return'<a href="http://twitter.com/'+a.substring(1)+'">'+a+"</a>"}).replace(/\B#([_a-z0-9\.]+)/ig,function(a){return'<a href="http://twitter.com/search?q=%23'+a.substring(1)+'">'+a+"</a>"}),a="<span>"+a+'</span> <a title="Details" href="http://twitter.com/'+this.options.screen_name+"/statuses/"+
b.id_str+'">'+this.relative_time(b.created_at)+"</a>";if(this.options.avatar){var c="profile_image_url";"https:"===this.options.protocol&&(c+="_https");a='<img src="'+b.user[c]+'" title="'+b.user.name+'" />'+a}return a},relative_time:function(b){var a=b.split(" "),b=a[1]+" "+a[2]+", "+a[5]+" "+a[3],c=Date.parse(b),a=1<arguments.length?arguments[1]:new Date,c=parseInt((a.getTime()-c)/1E3),c=c+60*a.getTimezoneOffset();return 60>c?"less than a minute ago":120>c?"about a minute ago":3600>c?parseInt(c/
60).toString()+" minutes ago":7200>c?"about an hour ago":86400>c?"about "+parseInt(c/3600).toString()+" hours ago":172800>c?"1 day ago":parseInt(c/86400).toString()+" days ago"},url:function(){for(var b=e.extend({},this.options),a=["list","avatar","protocol","show"],c=this.options.protocol+"//api.twitter.com/1/statuses/user_timeline.json?",d=0;d<a.length;d++)delete b[a[d]];0===b.since_id&&delete b.since_id;0===b.max_id&&delete b.max_id;return c+e.param(b)},twitterCallback:function(b){var a="html",
c=0===this.options.show?b.length:this.options.show;this.tweets=b;if(1<this.tweets.length||this.options.list)a="append",this.element.empty();for(b=0;b<c;b++)if(this.options.list)this.element[a]("<li>"+this.status(this.tweets[b])+"</li>");else this.element[a](this.status(this.tweets[b]))},getTweet:function(b){var a=[],c;for(c in d.tweets)d.tweets[c]._screen_name===b&&a.push({tweets:d.tweets[c].tweets,screen_name:d.tweets[c]._screen_name});return 1===a.length?a[0]:a}};e.fn.tweet=function(b){return this.each(function(){d.tweets=
d.tweets||{};g="tweet"+(+new Date).toString();d.tweets[g]=new f(this,b)})};e.getTweet=f.prototype.getTweet})(jQuery,window,document);