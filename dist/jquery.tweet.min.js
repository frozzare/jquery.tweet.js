/*!
* jQuery tweet
* Copyright (c) 2012 Fredrik Forsmo
* Version: 0.6.2
* Licensed MIT
*/
(function(a,b,c,d){function g(b,d){this.element=a(b),typeof d=="string"&&(d.indexOf("id:")===-1?d={screen_name:d}:d={id:d.replace("id:","")}),!d.include_rts&&d.count===1&&(d.count=5,d.show=1),d.callback="tweets."+e+".twitterCallback",d.https?this.protocol="https:":this.protocol=c.location.protocol.substr(0,4)==="http"?c.location.protocol:"http:",this.options=a.extend({},f,d),a.getScript(this.url())}"use strict";var e="",f={id:null,screen_name:"",include_rts:!0,max_id:0,since_id:0,count:1,show:0,list:!1,avatar:!1,https:!1};g.prototype={isArray:function(a){return a instanceof Array},status:function(a){var b=this,c=a.text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\>]*[^.,;'">\:\s\>\)\]\!])/g,function(a){return'<a href="'+a+'">'+a+"</a>"}).replace(/\B@([_a-z0-9]+)/ig,function(a){return'<a href="'+b.protocol+"//twitter.com/"+a.substring(1)+'">'+a+"</a>"}).replace(/\B#([_a-z0-9\.]+)/ig,function(a){return'<a href="'+b.protocol+"//twitter.com/search?q=%23"+a.substring(1)+'">'+a+"</a>"});return c="<span>"+c+'</span> <a href="'+this.protocol+"//twitter.com/"+this.options.screen_name+"/statuses/"+a.id_str+'">'+this.relative_time(a.created_at)+"</a>",this.options.avatar&&(c='<img src="'+a.user[this.protocol==="https:"?"profile_image_url_https":"profile_image_url"]+'" title="'+a.user.name+'" />'+c),c},relative_time:function(a){var b=a.split(" "),c=Date.parse(b[1]+" "+b[2]+", "+b[5]+" "+b[3]),d=parseInt(((new Date).getTime()-c)/1e3,10)*2+(new Date).getTimezoneOffset()*60;return d<60?"less than a minute ago":d<120?"about a minute ago":d<3600?parseInt(d/60,10).toString()+" minutes ago":d<7200?"about an hour ago":d<86400?"about "+parseInt(d/3600,10).toString()+" hours ago":d<172800?"1 day ago":parseInt(d/86400,10).toString()+" days ago"},url:function(){var b=a.extend({},this.options),c=["list","avatar","https","show","id"];return this.options.id!==null?this.protocol+"//api.twitter.com/1/statuses/show/"+this.options.id+".json?"+a.param({callback:this.options.callback}):(a.each(c,function(a,c){delete b[c]}),b.since_id===0&&delete b.since_id,b.max_id===0&&delete b.max_id,this.protocol+"//api.twitter.com/1/statuses/user_timeline.json?"+a.param(b))},twitterCallback:function(b){var c=this.options.show!==0?this.options.show:this.isArray(b)?b.length:1;this.isArray(b)?this.tweets=b:this.tweets=[b],this.options.id!==null&&(this.options.screen_name=this.tweets[0].user.screen_name),this.element.empty();for(var d=0;d<c;d++)this.options.list?this.element.append(a("<li />",{"data-tweet":this.tweets[d].id_str}).append(this.status(this.tweets[d]))):this.element.append(a("<span />",{"data-tweet":this.tweets[d].id_str}).append(this.status(this.tweets[d])))},get:function(c){var d=[],e=b.tweets;return a.each(e,function(b){e[b].options.screen_name.toLowerCase()===c.toLowerCase()&&a.each(e[b].tweets,function(a,b){d.push(b)})}),d.length===1?d[0]:d}},a.fn.tweet=function(a){return this.each(function(){e="t"+(+(new Date)).toString(),b.tweets[e]=new g(this,a)})},b.tweets={},a.tweet={get:g.prototype.get}})(jQuery,window,document);