/*!
 * jQuery tweet
 * Copyright 2012 Fredrik Forsmo, @frozzare
 * Version: 0.6
 * Licensed under the MIT license http://frozzare.mit-license.org
 */
(function(a,b,c,d){function g(b,g){this.element=a(b),typeof g=="string"?g.indexOf("id:")===-1?g={screen_name:g}:g={id:g.replace("id:","")}:g.username!==d&&(g.screen_name=g.username,delete g.username),!g.include_rts&&g.count===1&&(g.count=5,g.show=1),g.callback="tweets."+e+".twitterCallback",g.https?this.protocol="https:":this.protocol=c.location.protocol.substr(0,4)==="http"?c.location.protocol:"http:",this.options=a.extend({},f,g),this._defaults=f,this._screen_name=g.screen_name,a.getScript(this.url())}"use strict";var e="",f={screen_name:"",include_rts:!0,max_id:0,since_id:0,count:1,show:0,list:!1,avatar:!1,https:!1};g.prototype={isArray:function(a){return a instanceof Array},status:function(a){var b=a.text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\>]*[^.,;'">\:\s\>\)\]\!])/g,function(a){return'<a href="'+a+'">'+a+"</a>"}).replace(/\B@([_a-z0-9]+)/ig,function(a){return'<a href="http://twitter.com/'+a.substring(1)+'">'+a+"</a>"}).replace(/\B#([_a-z0-9\.]+)/ig,function(a){return'<a href="http://twitter.com/search?q=%23'+a.substring(1)+'">'+a+"</a>"});b="<span>"+b+'</span> <a title="Details" href="http://twitter.com/'+this.options.screen_name+"/statuses/"+a.id_str+'">'+this.relative_time(a.created_at)+"</a>";if(this.options.avatar){var c="profile_image_url";this.protocol==="https:"&&(c+="_https"),b='<img src="'+a.user[c]+'" title="'+a.user.name+'" />'+b}return b},relative_time:function(a){var b=a.split(" ");a=b[1]+" "+b[2]+", "+b[5]+" "+b[3];var c=Date.parse(a),d=arguments.length>1?arguments[1]:new Date,e=parseInt((d.getTime()-c)/1e3,10);return e+=d.getTimezoneOffset()*60,e<60?"less than a minute ago":e<120?"about a minute ago":e<3600?parseInt(e/60,10).toString()+" minutes ago":e<7200?"about an hour ago":e<86400?"about "+parseInt(e/3600,10).toString()+" hours ago":e<172800?"1 day ago":parseInt(e/86400,10).toString()+" days ago"},url:function(){var b=a.extend({},this.options),c=["list","avatar","https","show"];if(this.options.id!==d)return this.protocol+"//api.twitter.com/1/statuses/show/"+this.options.id+".json?"+a.param({callback:this.options.callback});var e=this.protocol+"//api.twitter.com/1/statuses/user_timeline.json?";for(var f=0;f<c.length;f++)delete b[c[f]];return b.since_id===0&&delete b.since_id,b.max_id===0&&delete b.max_id,e+a.param(b)},twitterCallback:function(a){var b="html",c=this.options.show!==0?this.options.show:this.isArray(a)?a.length:1;this.isArray(a)?this.tweets=a:this.tweets=[a];if(this.tweets.length>1||this.options.list)b="append",this.element.empty();for(var d=0;d<c;d++)this.options.list?this.element[b]("<li>"+this.status(this.tweets[d])+"</li>"):this.element[b](this.status(this.tweets[d]))},getTweet:function(a){var c=[];for(var d in b.tweets)b.tweets[d]._screen_name===a&&c.push({tweets:b.tweets[d].tweets,screen_name:b.tweets[d]._screen_name});return c.length===1?c[0]:c}},a.fn.tweet=function(a){return this.each(function(){b.tweets=b.tweets||{},e="tweet"+(+(new Date)).toString(),b.tweets[e]=new g(this,a)})},a.getTweet=g.prototype.getTweet})(jQuery,window,document)